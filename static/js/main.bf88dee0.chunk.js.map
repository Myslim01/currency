{"version":3,"sources":["logo.svg","routes.js","store/currency_rates/actionTypes.js","store/currency_rates/reducer.js","store/vk/actionTypes.js","store/vk/reducer.js","registerServiceWorker.js","store/vk/actions.js","containers/Footer.js","containers/AboutPanel.js","containers/CurrencyRateDashboard.js","containers/CurrencyConverter.js","services/CBR.js","services/CurrencyConverter.js","containers/Logger.js","containers/MainPanel.js","store/currency_rates/actions.js","containers/App.js","index.js","create-router.js","store/reducers.js"],"names":["module","exports","__webpack_require__","p","routes","name","path","CBR_DAILY_FETCHED","USD_EUR_RATE_FETCHED","initialState","Immutable","currencyRates","undefined","reduce","state","arguments","length","action","type","types","merge","cbrDaily","daily","usdEurRate","getCbrDailyCurrencyRates","getUsdEurRate","getCbrCurrencyRateByCode","_","keyBy","Valute","currency","CharCode","VK_GET_ACCESS_TOKEN_FETCHED","VK_GET_ACCESS_TOKEN_FAILED","VK_NOTIFICATION_STATUS_FETCHED","VK_NOTIFICATION_STATUS_FAILED","VK_INSETS_FETCHED","vk","accessToken","notificationStatus","insets","logs","error","getAccessToken","getNotificationStatus","getInsets","getLogs","JSON","stringify","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","API_VERSION","fetchAccessToken","Object","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","VKConnect","app_id","stop","apiRequest","method","params","successCallback","errorCallback","requestId","Math","floor","random","Number","MAX_SAFE_INTEGER","toString","clb","e","vkEvent","detail","data","found","request_id","Footer","react_default","createElement","vkui","className","level","component","target","href","before","message_default","onClick","this","openAbout","bind","props","router","navigate","Component","connect","AboutPanel","osname","platform","id","left","navigationBack","IOS","chevron_back_default","back_default","title","multiline","src_containers_Footer","CurrencyRateDashboard","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","renderRow","assertThisInitialized","stringDate","date","Date","parse","day","getDate","month","getMonth","year","getFullYear","slice","substr","rates","currentDate","getPrettyDate","previousDate","PreviousDate","cbrCurrencies","symbol","isMore","Value","Previous","color","arrow","style","currencyRatesSelectors","USD","RUB","EUR","CurrencyConverter","sourceCurrencyCode","targetCurrencyCode","amount","convertedAmount","changeSourceCurrencyCode","changeTargetCurrencyCode","changeAmount","getCurrencyRate","calculateAmount","newTargetCurrencyCode","newSourceCurrencyCode","value","setState","USD_EUR","val","sourceAmount","round","pow","toFixed","replace","code","getCurrencySymbol","getPrettyAmount","placeholder","pattern","toLocaleString","alignment","onChange","disabled","services_CBR","cacheDate","fetch","response","json","n","services_CurrencyConverter","Logger","vkSelectors","MainPanel","dispatch","_ref2","_callee2","getState","_context2","sent","t0","_x3","_x4","apply","_ref","CBR","getDaily","_x","_x2","logger","textAlign","marginTop","width","height","src","logo","alt","src_containers_CurrencyRateDashboard","renderNotificationButton","src_containers_CurrencyConverter","notification_disable_default","notification_default","size","toggleNotifications","user_default","authorize","vkActions","_callee3","_context3","_callee4","_context4","App","_ref5","_callee5","_context5","no_toolbar","activePanel","route","isWebView","activeView","containers_MainPanel","containers_AboutPanel","index_es","nodeName","App_App","assign","createRouter","defaultRoute","usePlugin","loggerPlugin","browserPlugin","useHash","store","applyMiddleware","thunk","router5Middleware","createLogger","createStore","createStoreWithMiddleware","combineReducers","router5Reducer","configureStore","start","ReactDOM","render","es","containers_App","document","getElementById","URL","process","origin","addEventListener","concat","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.bf88dee0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.4c512146.svg\";","export default [\n    { name: 'currency', path: '/currency' },\n    { name: 'about', path: '/about' },\n]","export const CBR_DAILY_FETCHED = 'currency_rates.CBR_DAILY_FETCHED';\nexport const USD_EUR_RATE_FETCHED = 'currency_rates.USD_EUR_RATE_FETCHED';\n","import Immutable from 'seamless-immutable';\nimport _ from 'lodash';\nimport * as types from './actionTypes';\n\nconst initialState = Immutable({\n    currencyRates: undefined,\n});\n\nexport default function reduce(state = initialState, action = {}) {\n    switch (action.type) {\n        case types.CBR_DAILY_FETCHED:\n            return state.merge({\n                cbrDaily: action.daily\n            });\n        case types.USD_EUR_RATE_FETCHED:\n            return state.merge({\n                usdEurRate: action.daily\n            });\n        default:\n            return state;\n    }\n}\n\nexport function getCbrDailyCurrencyRates(state) {\n    return state.currencyRates.cbrDaily;\n}\n\nexport function getUsdEurRate(state) {\n    return state.currencyRates.usdEurRate;\n}\n\nexport function getCbrCurrencyRateByCode(state) {\n    if (!state.currencyRates.cbrDaily) {\n        return [];\n    }\n    return _.keyBy(state.currencyRates.cbrDaily.Valute, (currency) => currency.CharCode);\n}\n","export const VK_GET_ACCESS_TOKEN_FETCHED = 'vk.accessTokenFetched';\nexport const VK_GET_ACCESS_TOKEN_FAILED = 'vk.accessTokenFailed';\nexport const VK_NOTIFICATION_STATUS_FETCHED = 'vk.notificationsStatusFetched';\nexport const VK_NOTIFICATION_STATUS_FAILED = 'vk.notificationsStatusFailed';\nexport const VK_INSETS_FETCHED = 'vk.insetsFetched';\n","import Immutable from 'seamless-immutable';\nimport * as types from './actionTypes';\n\nconst initialState = Immutable({\n    vk: undefined,\n});\n\nexport default function reduce(state = initialState, action = {}) {\n    switch (action.type) {\n        case types.VK_GET_ACCESS_TOKEN_FETCHED:\n            return state.merge({\n                accessToken: action.accessToken\n            });\n        case types.VK_NOTIFICATION_STATUS_FETCHED:\n            return state.merge({\n                notificationStatus: action.notificationStatus\n            });\n        case types.VK_INSETS_FETCHED:\n            return state.merge({\n                insets: action.insets\n            });\n        case types.VK_GET_ACCESS_TOKEN_FAILED:\n            return state.merge({\n                logs: action.error\n            });\n        case types.VK_NOTIFICATION_STATUS_FAILED:\n            return state.merge({\n                logs: action.error\n            });\n        default:\n            return state;\n    }\n}\n\nexport function getAccessToken(state) {\n    return state.vk.accessToken;\n}\n\nexport function getNotificationStatus(state) {\n    return state.vk.notificationStatus;\n}\n\nexport function getInsets(state) {\n    return state.vk.insets;\n}\n\nexport function getLogs(state) {\n    return JSON.stringify(state.vk.logs);\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Lets check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://goo.gl/SC7cgQ'\n                    );\n                });\n            } else {\n                // Is not local host. Just register service worker\n                registerValidSW(swUrl);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the old content will have been purged and\n                            // the fresh content will have been added to the cache.\n                            // It's the perfect time to display a \"New content is\n                            // available; please refresh.\" message in your web app.\n                            console.log('New content is available; please refresh.');\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            if (\n                response.status === 404 ||\n                response.headers.get('content-type').indexOf('javascript') === -1\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import * as VKConnect from '@vkontakte/vkui-connect';\nimport * as types from './actionTypes';\n\nconst API_VERSION = '5.80';\n\nexport function fetchAccessToken() {\n    return async () => {\n        let appId = process.env.NODE_ENV === 'production' ? 6625834 : 6625863;\n        VKConnect.send('VKWebAppGetAuthToken', {'app_id': appId});\n    }\n}\n\nexport function fetchNotificationStatus(accessToken) {\n    return async (dispatch) => {\n        apiRequest('apps.isNotificationsAllowed', {}, accessToken, response => {\n            dispatch({\n                type: types.VK_NOTIFICATION_STATUS_FETCHED,\n                notificationStatus: response['is_allowed'],\n            });\n        }, error => {\n            dispatch({type: types.VK_NOTIFICATION_STATUS_FAILED, error: error});\n        });\n    }\n}\n\nexport function denyNotifications() {\n    return async () => {\n        VKConnect.send('VKWebAppDenyNotifications', {});\n    }\n}\n\nexport function allowNotifications() {\n    return async () => {\n        VKConnect.send('VKWebAppAllowNotifications', {});\n    }\n}\n\nexport function initApp() {\n    return async (dispatch) => {\n        VKConnect.subscribe(e => {\n            let vkEvent = e.detail;\n            if (!vkEvent) {\n                console.error('invalid event', e);\n                return;\n            }\n\n            let type = vkEvent['type'];\n            let data = vkEvent['data'];\n\n            switch (type) {\n                case 'VKWebAppAllowNotificationsResult':\n                    dispatch({\n                        type: types.VK_NOTIFICATION_STATUS_FETCHED,\n                        notificationStatus: true,\n                    });\n                    break;\n\n                case 'VKWebAppDenyNotificationsResult':\n                    dispatch({\n                        type: types.VK_NOTIFICATION_STATUS_FETCHED,\n                        notificationStatus: false,\n                    });\n                    break;\n\n                case 'VKWebAppAccessTokenReceived':\n                    dispatch({\n                        type: types.VK_GET_ACCESS_TOKEN_FETCHED,\n                        accessToken: data['access_token']\n                    });\n                    break;\n\n                case 'VKWebAppUpdateInsets':\n                    dispatch({\n                        type: types.VK_INSETS_FETCHED,\n                        insets: data.insets\n                    });\n                    break;\n\n                default:\n                //nop;\n            }\n        });\n\n        VKConnect.send('VKWebAppInit', {'no_toolbar': true});\n    }\n}\n\nfunction apiRequest(method, params = {}, accessToken = '', successCallback = undefined, errorCallback = undefined) {\n    let requestId = getNewRequestId();\n    if (successCallback !== undefined || errorCallback !== undefined) {\n        let clb = function callback(e) {\n            let vkEvent = e.detail;\n            if (!vkEvent) {\n                console.error('invalid event', e);\n                return;\n            }\n\n            let type = vkEvent['type'];\n            let data = vkEvent['data'];\n\n            let found = false;\n            if ('VKWebAppCallAPIMethodResult' === type && data['request_id'] === requestId) {\n                if (successCallback !== undefined) {\n                    successCallback(data['response']);\n                }\n\n                found = true;\n            } else if ('VKWebAppCallAPIMethodFailed' === type && data['request_id'] === requestId) {\n                if (errorCallback !== undefined) {\n                    errorCallback(data);\n                }\n\n                found = true;\n            }\n\n            if (found) {\n                VKConnect.unsubscribe(clb);\n            }\n\n        };\n\n        VKConnect.subscribe(clb);\n    }\n\n    params['access_token'] = accessToken;\n\n    if (params['v'] === undefined) {\n        params['v'] = API_VERSION;\n    }\n\n\n    VKConnect.send('VKWebAppCallAPIMethod', {\n        'method': method,\n        'params': params,\n        'request_id': requestId\n    });\n}\n\nfunction getNewRequestId() {\n    return (Math.floor(Math.random() * Number.MAX_SAFE_INTEGER)).toString();\n}\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { Div, Button } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './Footer.css'\nimport Icon24Message from '@vkontakte/icons/dist/24/message';\n\nclass Footer extends Component {\n    \n    render() {\n        return (\n            <Div className=\"footer\">\n                <Button level=\"3\" component=\"a\" target=\"_blank\"\n                           href=\"https://vk.me/currency_app\" before={<Icon24Message/>}/>\n                <Button level=\"3\" component=\"a\" target=\"_blank\"\n                           href=\"https://vk.com/currency_app\">Группа</Button>\n                <Button level=\"3\" component=\"a\" onClick={this.openAbout.bind(this)}>О\n                    программе</Button>\n            </Div>\n        );\n    }\n\n    openAbout() {\n        this.props.router.navigate('about');\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n    };\n}\n\nexport default connect(mapStateToProps)(Footer);\n","import React, {Component} from 'react';\nimport { Panel, PanelHeader, HeaderButton, Group, Div, List, Cell, Link, platform, IOS } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {connect} from 'react-redux';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Footer from './Footer';\n\nclass AboutPanel extends Component {\n\n    render() {\n        const osname = platform();\n\n        return (\n            <Panel id={this.props.id}>\n                <PanelHeader\n                    left={<HeaderButton onClick={this.navigationBack.bind(this)}>{osname === IOS ?\n                        <Icon28ChevronBack/> : <Icon24Back/>}</HeaderButton>}\n                >\n                    О программе\n                </PanelHeader>\n                <Group title=\"Исходный код\">\n                    <Div>\n                        Исходный код доступен на <Link href=\"https://github.com/tsivarev/currency\">GitHub</Link>.\n                        <br/>\n                        <br/>\n                        Документация <Link href=\"https://vk.com/dev/vk_apps_docs\">VK Apps платформы</Link>.\n                    </Div>\n                </Group>\n                <Group title=\"Используемые ресурсы\">\n                    <List>\n                        <Cell multiline>\n                            Иконки – <Link href=\"https://www.flaticon.com/authors/smashicons\">Smashicons</Link>.\n                            Лицензия <Link\n                            href=\"http://creativecommons.org/licenses/by/3.0/\">CC\n                            3.0 BY</Link>.\n                        </Cell>\n                        <Cell multiline>\n                            Курсы ЦБ РФ – <Link href=\"https://www.cbr-xml-daily.ru/\">API</Link>.\n                        </Cell>\n                        <Cell multiline>\n                            Курс USD/EUR – <Link href=\"https://free.currencyconverterapi.com/\">API</Link>.\n                        </Cell>\n                    </List>\n                </Group>\n                <Footer router={this.props.router}/>\n            </Panel>\n        );\n    }\n\n    navigationBack() {\n        this.props.router.navigate('currency')\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {};\n}\n\nexport default connect(mapStateToProps)(AboutPanel);\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { List, Cell, Div } from '@vkontakte/vkui';\nimport './CurrencyRateDashboard.css';\nimport * as currencyRatesSelectors from '../store/currency_rates/reducer';\n\nclass CurrencyRateDashboard extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.renderRow = this.renderRow.bind(this);\n    }\n\n    getPrettyDate(stringDate) {\n        let date = new Date(Date.parse(stringDate));\n        let day = date.getDate();\n        let month = date.getMonth();\n        let year = date.getFullYear();\n\n        return ('0' + day).slice(-2) + '.' + ('0' + (month + 1)).slice(-2) + '.' + year.toString().substr(-2);\n    }\n\n    render() {\n        if (!this.props.rates) {\n            return (<Div/>);\n        }\n\n        let currentDate = this.getPrettyDate(this.props.rates.Date);\n        let previousDate = this.getPrettyDate(this.props.rates.PreviousDate);\n\n        return (\n            <List>\n                <Cell before={<div className=\"currency_rate_dashboard__item_before\"/>}>\n                    <div className=\"currency_rate_dashboard__item\">\n                        <div\n                            className=\"currency_rate_dashboard__item__column currency_rate_dashboard__header\">{currentDate}</div>\n                        <div\n                            className=\"currency_rate_dashboard__item__column currency_rate_dashboard__header\">{previousDate}</div>\n                    </div>\n                </Cell>\n\n                {this.renderRow('$', this.props.cbrCurrencies['USD'])}\n                {this.renderRow('€', this.props.cbrCurrencies['EUR'])}\n            </List>\n        );\n    }\n\n    renderRow(symbol, currency) {\n        \n        let isMore = currency.Value > currency.Previous;\n        let color = isMore ? '#1BEA60' : '#FF0000';\n        let arrow = isMore ? '↑' : '↓';\n\n        return (\n            <Cell before={<div className=\"currency_rate_dashboard__item_before\">{symbol}</div>}>\n                <div className=\"currency_rate_dashboard__item\">\n                    <div className=\"currency_rate_dashboard__item__column\" style={{color: color}}>\n                        {currency.Value} ₽ {arrow}\n                    </div>\n                    <div className=\"currency_rate_dashboard__item__column\">\n                        {currency.Previous} ₽\n                    </div>\n                </div>\n            </Cell>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        rates: currencyRatesSelectors.getCbrDailyCurrencyRates(state),\n        cbrCurrencies: currencyRatesSelectors.getCbrCurrencyRateByCode(state),\n    };\n}\n\nexport default connect(mapStateToProps)(CurrencyRateDashboard);\n","import React, {Component} from 'react';\nimport { Div, Input, Select } from '@vkontakte/vkui';\nimport './CurrencyConverter.css';\nimport {connect} from 'react-redux';\nimport * as currencyRatesSelectors from '../store/currency_rates/reducer';\n\nconst USD = 'USD';\nconst RUB = 'RUB';\nconst EUR = 'EUR';\n\nclass CurrencyConverter extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            sourceCurrencyCode: USD,\n            targetCurrencyCode: RUB,\n            amount: 0,\n            convertedAmount: '0',\n        };\n\n        this.changeSourceCurrencyCode = this.changeSourceCurrencyCode.bind(this);\n        this.changeTargetCurrencyCode = this.changeTargetCurrencyCode.bind(this);\n        this.changeAmount = this.changeAmount.bind(this);\n\n        this.getCurrencyRate = this.getCurrencyRate.bind(this);\n        this.calculateAmount = this.calculateAmount.bind(this);\n    }\n\n    changeSourceCurrencyCode(e) {\n        let newTargetCurrencyCode = this.state.targetCurrencyCode;\n        let newSourceCurrencyCode = e.target.value;\n\n        if (this.state.targetCurrencyCode === e.target.value) {\n            newTargetCurrencyCode = this.state.sourceCurrencyCode;\n        }\n\n        this.setState({\n            sourceCurrencyCode: newSourceCurrencyCode,\n            targetCurrencyCode: newTargetCurrencyCode,\n            convertedAmount: this.calculateAmount(this.state.amount, newSourceCurrencyCode, newTargetCurrencyCode)\n        });\n    }\n\n    changeTargetCurrencyCode(e) {\n        let newTargetCurrencyCode = e.target.value;\n        let newSourceCurrencyCode = this.state.sourceCurrencyCode;\n\n        if (this.state.sourceCurrencyCode === e.target.value) {\n            newSourceCurrencyCode = this.state.targetCurrencyCode;\n        }\n\n        this.setState({\n            sourceCurrencyCode: newSourceCurrencyCode,\n            targetCurrencyCode: newTargetCurrencyCode,\n            convertedAmount: this.calculateAmount(this.state.amount, newSourceCurrencyCode, newTargetCurrencyCode)\n        });\n    }\n\n    getCurrencyRate(sourceCurrencyCode, targetCurrencyCode) {\n        if (!this.props.cbrCurrencies) {\n            //not loaded yet\n            return 1;\n        }\n\n        if (sourceCurrencyCode === RUB) {\n            if (this.props.cbrCurrencies[targetCurrencyCode]) {\n                return 1 / this.props.cbrCurrencies[targetCurrencyCode].Value;\n            } else {\n                return 1;\n            }\n        }\n\n        if (targetCurrencyCode === RUB) {\n            if (this.props.cbrCurrencies[sourceCurrencyCode]) {\n                return this.props.cbrCurrencies[sourceCurrencyCode].Value;\n            } else {\n                return 1;\n            }\n        }\n\n        if (targetCurrencyCode === USD) {\n            return 1 / this.props.usdEurRate.USD_EUR.val;\n        }\n\n        if (targetCurrencyCode === EUR) {\n            return this.props.usdEurRate.USD_EUR.val;\n        }\n\n        return 1;\n    }\n\n    calculateAmount(sourceAmount, sourceCurrencyCode, targetCurrencyCode) {\n        return this.getCurrencyRate(sourceCurrencyCode, targetCurrencyCode) * sourceAmount;\n    }\n\n    getPrettyAmount(amount) {\n        return (Math.round(amount * Math.pow(10, 2)) / Math.pow(10, 2)).toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, '$&,');\n    }\n\n    changeAmount(e) {\n        this.setState({\n            amount: e.target.value,\n            convertedAmount: this.calculateAmount(e.target.value, this.state.sourceCurrencyCode, this.state.targetCurrencyCode)\n        });\n    }\n\n    getCurrencySymbol(code) {\n        switch (code) {\n            case USD:\n                return '$';\n            case EUR:\n                return '€';\n            case RUB:\n                return '₽';\n\n            default:\n                return '';\n        }\n    }\n\n    render() {\n        return (\n            <Div className=\"currency_converter\">\n                <div style={{color: '#71757A'}}>\n                    Курс\n                    1 {this.getCurrencySymbol(this.state.sourceCurrencyCode)} = {this.getPrettyAmount(this.getCurrencyRate(this.state.sourceCurrencyCode, this.state.targetCurrencyCode))} {this.getCurrencySymbol(this.state.targetCurrencyCode)}\n                </div>\n                <div className=\"currency_converter__amount_input\">\n                    <div className=\"currency_converter__amount_input__input\">\n                        <Input type=\"number\" placeholder=\"0\" pattern=\"\\d*\"\n                                  value={this.state.amount ? this.state.amount.toLocaleString() : ''} alignment=\"right\"\n                                  onChange={this.changeAmount}/>\n                    </div>\n                    <div className=\"currency_converter__amount_input__selector\">\n                        <Select value={this.state.sourceCurrencyCode} onChange={this.changeSourceCurrencyCode}>\n                            <option value={USD}>{this.getCurrencySymbol(USD)}</option>\n                            <option value={EUR}>{this.getCurrencySymbol(EUR)}</option>\n                            <option value={RUB}>{this.getCurrencySymbol(RUB)}</option>\n                        </Select>\n                    </div>\n                </div>\n                <div className=\"currency_converter__amount_input\">\n                    <div className=\"currency_converter__amount_input__input\">\n                        <Input type=\"text\" alignment=\"right\" disabled\n                                  value={this.getPrettyAmount(this.state.convertedAmount)}/>\n                    </div>\n                    <div className=\"currency_converter__amount_input__selector\">\n                        <Select value={this.state.targetCurrencyCode} onChange={this.changeTargetCurrencyCode}>\n                            <option value={USD}>{this.getCurrencySymbol(USD)}</option>\n                            <option value={EUR}>{this.getCurrencySymbol(EUR)}</option>\n                            <option value={RUB}>{this.getCurrencySymbol(RUB)}</option>\n                        </Select>\n                    </div>\n                </div>\n            </Div>);\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        cbrCurrencies: currencyRatesSelectors.getCbrCurrencyRateByCode(state),\n        usdEurRate: currencyRatesSelectors.getUsdEurRate(state)\n    };\n}\n\nexport default connect(mapStateToProps)(CurrencyConverter);\n","class CBR {\n    static pad(n) {\n        return n < 10 ? '0' + n : n\n    }\n\n    async getDaily(date) {\n        let cacheDate = date.getDate() + \"_\" + (date.getMonth() + 1) + \"_\" + date.getFullYear();\n        return fetch('https://www.cbr-xml-daily.ru/daily_json.js?' + cacheDate).then(function (response) {\n            return response.json();\n        })\n    }\n}\n\nexport default new CBR();\n","class CurrencyConverter {\n    async getUsdEurRate() {\n        return fetch('https://free.currencyconverterapi.com/api/v5/convert?q=USD_EUR&compact=y')\n            .then(function (response) {\n                return response.json();\n            })\n    }\n}\n\nexport default new CurrencyConverter();\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { Div } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport * as vkSelectors from '../store/vk/reducer';\n\nclass Logger extends Component {\n\n    render() {\n        return (\n            <Div>\n                {this.props.logs}\n            </Div>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        logs: vkSelectors.getLogs(state),\n    };\n}\n\nexport default connect(mapStateToProps)(Logger);\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { Button, Panel, PanelHeader, Div, Group } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon24Notification from '@vkontakte/icons/dist/24/notification';\nimport Icon24NotificationDisable from '@vkontakte/icons/dist/24/notification_disable';\nimport Icon24User from '@vkontakte/icons/dist/24/user';\nimport logo from '../logo.svg';\nimport CurrencyRateDashboard from './CurrencyRateDashboard';\nimport CurrencyConverter from './CurrencyConverter';\nimport * as vkSelectors from '../store/vk/reducer';\nimport * as vkActions from '../store/vk/actions';\nimport * as currencyRatesActions from '../store/currency_rates/actions';\nimport Footer from './Footer';\nimport Logger from './Logger';\n\nclass MainPanel extends Component {\n\n    componentWillMount() {\n        this.props.dispatch(currencyRatesActions.fetchUsdEurRate());\n        this.props.dispatch(currencyRatesActions.fetchCbrCurrencyRates());\n    }\n\n    componentDidUpdate() {\n        if (this.props.accessToken) {\n            this.props.dispatch(vkActions.fetchNotificationStatus(this.props.accessToken));\n        }\n    }\n\n    render() {\n        const isProduction = process.env.NODE_ENV === 'production';\n        let logger = null;\n        if (!isProduction) {\n            logger = <Logger/>;\n        }\n\n        return (\n            <Panel id={this.props.id}>\n                <PanelHeader>\n                    Курсы валют\n                </PanelHeader>\n                <Div style={{textAlign: 'center', marginTop: 10}}>\n                    <img width={96} height={96} src={logo} alt=\"logo\"/>\n                </Div>\n                <Group title=\"Курс ЦБ РФ\">\n                    <CurrencyRateDashboard/>\n                    {this.renderNotificationButton()}\n                </Group>\n                <Group title=\"Калькулятор\">\n                    <CurrencyConverter/>\n                </Group>\n                <Footer router={this.props.router}/>\n                {logger}\n            </Panel>\n        );\n    }\n\n    renderNotificationButton() {\n        const {notificationStatus} = this.props;\n        if (!this.props.accessToken || notificationStatus === undefined) {\n            return (<Div>\n                <Button\n                    before={<Icon24User/>}\n                    level='1'\n                    size=\"xl\"\n                    onClick={this.authorize.bind(this)}\n                >Авторизоваться</Button>\n            </Div>);\n        }\n\n        return (<Div>\n            <Button\n                before={notificationStatus ? <Icon24NotificationDisable/> : <Icon24Notification/>}\n                level={notificationStatus ? '2' : '1'}\n                size=\"xl\"\n                onClick={this.toggleNotifications.bind(this)}\n            >{notificationStatus ? 'Отписаться' : 'Подписаться'}</Button>\n        </Div>);\n    }\n\n\n    authorize() {\n        this.props.dispatch(vkActions.fetchAccessToken());\n    }\n\n\n    toggleNotifications() {\n        const {notificationStatus} = this.props;\n\n        if (notificationStatus) {\n            this.props.dispatch(vkActions.denyNotifications());\n        } else {\n            this.props.dispatch(vkActions.allowNotifications());\n        }\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        notificationStatus: vkSelectors.getNotificationStatus(state),\n    };\n}\n\nexport default connect(mapStateToProps)(MainPanel);\n","import * as types from './actionTypes';\nimport CBR from '../../services/CBR';\nimport CurrencyConverter from '../../services/CurrencyConverter';\n\nexport function fetchCbrCurrencyRates() {\n    return async (dispatch, getState) => {\n        try {\n            let date = new Date();\n            const daily = await CBR.getDaily(date);\n            dispatch({type: types.CBR_DAILY_FETCHED, daily: daily});\n        } catch (error) {\n            console.error(error);\n        }\n    };\n}\n\nexport function fetchUsdEurRate() {\n    return async (dispatch, getState) => {\n        try {\n            const daily = await CurrencyConverter.getUsdEurRate();\n            dispatch({type: types.USD_EUR_RATE_FETCHED, daily: daily});\n        } catch (error) {\n            console.error(error);\n        }\n    };\n}\n","import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport { ConfigProvider, Root, View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {isWebView} from '@vkontakte/vkui/src/lib/webview';\nimport * as vkSelectors from '../store/vk/reducer';\nimport * as vkActions from '../store/vk/actions';\nimport AboutPanel from './AboutPanel';\nimport MainPanel from './MainPanel';\nimport { RouteNode } from 'react-router5'\n\nclass App extends Component {\n\n    componentWillMount() {\n        this.props.dispatch(vkActions.initApp());\n        this.props.dispatch(vkActions.fetchAccessToken());\n    }\n\n    render() {\n        let activePanel = this.props.route.name === 'about' ? 'aboutPanel' : 'mainPanel';\n\n        return (\n            <ConfigProvider insets={this.props.insets} isWebView={isWebView}>\n                <Root activeView=\"mainView\">\n                    <View id=\"mainView\" activePanel={activePanel}>\n                        <MainPanel router={this.props.router} id=\"mainPanel\" accessToken={this.props.accessToken}/>\n                        <AboutPanel router={this.props.router} id=\"aboutPanel\"/>\n                    </View>\n                </Root>\n            </ConfigProvider>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        accessToken: vkSelectors.getAccessToken(state),\n        insets: vkSelectors.getInsets(state),\n    };\n}\n\nexport default connect(mapStateToProps)(\n    (props) => (\n        <RouteNode nodeName=\"\">\n            {({ route }) => <App route={route} {...props}/>}\n        </RouteNode>\n    )\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport { RouterProvider } from 'react-router5'\nimport createRouter from './create-router'\nimport configureStore  from './store/reducers';\nimport registerServiceWorker from './registerServiceWorker';\nimport App from './containers/App';\n\nconst router = createRouter()\nconst store = configureStore(router)\n\nrouter.start(() => {\n    ReactDOM.render((\n        <Provider store={store}>\n            <RouterProvider router={router}>\n                <App router={router}/>\n            </RouterProvider>\n        </Provider>\n    ), document.getElementById('root'))\n})\n\nregisterServiceWorker();","import createRouter from 'router5'\nimport loggerPlugin from 'router5-plugin-logger'\nimport browserPlugin from 'router5-plugin-browser'\nimport routes from './routes'\n\nexport default function configureRouter() {\n    const router = createRouter(routes, {\n        defaultRoute: 'currency'\n    })\n\n    router.usePlugin(loggerPlugin)\n    router.usePlugin(\n            browserPlugin({\n                useHash: true\n            })\n        )\n\n    return router\n}","import currencyRates from './currency_rates/reducer';\nimport vk from './vk/reducer';\nimport { createStore, applyMiddleware, combineReducers } from 'redux'\nimport { router5Middleware, router5Reducer } from 'redux-router5'\nimport { createLogger } from 'redux-logger'\nimport thunk from 'redux-thunk'\n\nexport default function configureStore(router, initialState = {}) {\n    const createStoreWithMiddleware = applyMiddleware(\n        thunk,\n        router5Middleware(router),\n        createLogger()\n    )(createStore)\n\n    const store = createStoreWithMiddleware(\n        combineReducers({\n            router: router5Reducer,\n            currencyRates,\n            vk\n        }),\n        initialState\n    )\n\n    window.store = store\n    return store\n}"],"sourceRoot":""}